"use client";
import Link from "next/link";
import { Fragment } from "react";
import LocationIcon from "../icons/LocationIcon";

const BreadcrumbLinks = ({ links }) => {
  const onLinkClick = () => {
    const event = new CustomEvent("router-link", { bubbles: true });

    window.dispatchEvent(event);
  };

  return (
    <div className="flex gap-2 items-center">
      <svg
        width="20"
        height="21"
        viewBox="0 0 20 21"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M16.6667 6.88713L11.6667 2.5038C11.2084 2.09384 10.615 1.86719 10.0001 1.86719C9.38513 1.86719 8.79176 2.09384 8.33341 2.5038L3.33341 6.88713C3.06872 7.12386 2.8575 7.41426 2.71381 7.739C2.57012 8.06374 2.49726 8.41537 2.50008 8.77046V16.0538C2.50008 16.7168 2.76347 17.3527 3.23231 17.8216C3.70115 18.2904 4.33704 18.5538 5.00008 18.5538H15.0001C15.6631 18.5538 16.299 18.2904 16.7678 17.8216C17.2367 17.3527 17.5001 16.7168 17.5001 16.0538V8.76213C17.5017 8.40843 17.4283 8.05841 17.2846 7.7352C17.141 7.41198 16.9304 7.12293 16.6667 6.88713ZM11.6667 16.8871H8.33341V12.7205C8.33341 12.4994 8.42121 12.2875 8.57749 12.1312C8.73377 11.9749 8.94573 11.8871 9.16675 11.8871H10.8334C11.0544 11.8871 11.2664 11.9749 11.4227 12.1312C11.5789 12.2875 11.6667 12.4994 11.6667 12.7205V16.8871ZM15.8334 16.0538C15.8334 16.2748 15.7456 16.4868 15.5893 16.6431C15.4331 16.7993 15.2211 16.8871 15.0001 16.8871H13.3334V12.7205C13.3334 12.0574 13.07 11.4215 12.6012 10.9527C12.1323 10.4839 11.4965 10.2205 10.8334 10.2205H9.16675C8.5037 10.2205 7.86782 10.4839 7.39898 10.9527C6.93014 11.4215 6.66675 12.0574 6.66675 12.7205V16.8871H5.00008C4.77907 16.8871 4.5671 16.7993 4.41082 16.6431C4.25454 16.4868 4.16675 16.2748 4.16675 16.0538V8.76213C4.1669 8.64381 4.19224 8.52688 4.24109 8.41911C4.28995 8.31135 4.36119 8.21522 4.45008 8.13713L9.45008 3.76213C9.60215 3.62853 9.79766 3.55485 10.0001 3.55485C10.2025 3.55485 10.398 3.62853 10.5501 3.76213L15.5501 8.13713C15.639 8.21522 15.7102 8.31135 15.7591 8.41911C15.8079 8.52688 15.8333 8.64381 15.8334 8.76213V16.0538Z"
          fill="#BC9665"
        />
      </svg>

      {links.map((link, index) => (
        <Fragment key={link.title + index}>
          <svg
            width="16"
            height="17"
            viewBox="0 0 16 17"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M9.88712 7.74652L7.06045 4.91986C6.99847 4.85737 6.92474 4.80777 6.8435 4.77393C6.76226 4.74008 6.67512 4.72266 6.58712 4.72266C6.49911 4.72266 6.41197 4.74008 6.33073 4.77393C6.24949 4.80777 6.17576 4.85737 6.11378 4.91986C5.98962 5.04476 5.91992 5.21373 5.91992 5.38986C5.91992 5.56598 5.98962 5.73495 6.11378 5.85986L8.47378 8.21986L6.11378 10.5799C5.98962 10.7048 5.91992 10.8737 5.91992 11.0499C5.91992 11.226 5.98962 11.3949 6.11378 11.5199C6.17608 11.5816 6.24995 11.6305 6.33118 11.6637C6.4124 11.6969 6.49938 11.7137 6.58712 11.7132C6.67485 11.7137 6.76183 11.6969 6.84305 11.6637C6.92428 11.6305 6.99816 11.5816 7.06045 11.5199L9.88712 8.69319C9.9496 8.63121 9.9992 8.55748 10.033 8.47624C10.0669 8.395 10.0843 8.30786 10.0843 8.21986C10.0843 8.13185 10.0669 8.04471 10.033 7.96347C9.9992 7.88223 9.9496 7.8085 9.88712 7.74652Z"
              fill="#4C4763"
            />
          </svg>

          <Link
            href={link?.href ?? "#"}
            className="text-xs font-gothamLight capitalize line-clamp-1"
            onClick={onLinkClick}
          >
            {link.title}
          </Link>
        </Fragment>
      ))}
    </div>
  );
};

export function Breadcrumb({
  links,
  title,
  description = "",
  subTitle = "",
  date = "",
  location = "",
}) {
  return (
    <div className="breadcrumb-wrapper relative mt-3 rounded-2xl">
      <div className="px-3 py-4 md:px-6 md:py-6  breadcrumb bg-seconday_50 rounded-xl shadow">
        <div className="container !px-0">
          <BreadcrumbLinks links={links} />

          <h2 className="mt-4 flex items-center gap-4 text-xl font-ncs text-secondary_secondary">
            <span className="capitalize text-lg md:text-xl">{title}</span>
            <span className="bg-secondary_secondary h-px w-[7rem] flex-shrink-0"></span>
          </h2>

          {subTitle && (
            <h4 className="mt-3 font-gothamMedium text-lg md:text-2xl text-neutral-950">
              {subTitle}
            </h4>
          )}

          <div className="flex gap-4 mt-3">
            {date && (
              <div className="flex items-center gap-2">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="17"
                  height="18"
                  viewBox="0 0 17 18"
                  fill="none"
                >
                  <path
                    d="M8.49935 1.49609C6.68346 1.50127 4.9389 2.20366 3.62602 3.45818V2.20443C3.62602 2.01657 3.55139 1.8364 3.41855 1.70356C3.28571 1.57072 3.10554 1.49609 2.91768 1.49609C2.72982 1.49609 2.54965 1.57072 2.41682 1.70356C2.28398 1.8364 2.20935 2.01657 2.20935 2.20443V5.39193C2.20935 5.57979 2.28398 5.75996 2.41682 5.89279C2.54965 6.02563 2.72982 6.10026 2.91768 6.10026H6.10518C6.29304 6.10026 6.47321 6.02563 6.60605 5.89279C6.73889 5.75996 6.81352 5.57979 6.81352 5.39193C6.81352 5.20407 6.73889 5.0239 6.60605 4.89106C6.47321 4.75822 6.29304 4.68359 6.10518 4.68359H4.40518C5.31594 3.73185 6.52983 3.12714 7.83814 2.97344C9.14646 2.81974 10.4674 3.12666 11.574 3.84142C12.6805 4.55617 13.5035 5.63412 13.9013 6.8899C14.2992 8.14569 14.2471 9.50086 13.7541 10.7224C13.261 11.944 12.3578 12.9556 11.1996 13.5833C10.0415 14.211 8.70086 14.4157 7.4082 14.162C6.11554 13.9084 4.95164 13.2123 4.1166 12.1935C3.28156 11.1747 2.82757 9.89673 2.83268 8.57943C2.83268 8.39157 2.75805 8.2114 2.62522 8.07856C2.49238 7.94572 2.31221 7.87109 2.12435 7.87109C1.93649 7.87109 1.75632 7.94572 1.62348 8.07856C1.49064 8.2114 1.41602 8.39157 1.41602 8.57943C1.41602 9.98038 1.83145 11.3499 2.60977 12.5147C3.3881 13.6796 4.49436 14.5875 5.78867 15.1236C7.08298 15.6597 8.50721 15.8 9.88124 15.5267C11.2553 15.2533 12.5174 14.5787 13.508 13.5881C14.4986 12.5975 15.1733 11.3353 15.4466 9.96132C15.7199 8.58728 15.5796 7.16306 15.0435 5.86875C14.5074 4.57444 13.5995 3.46818 12.4346 2.68985C11.2698 1.91152 9.9003 1.49609 8.49935 1.49609ZM8.49935 5.74609C8.31149 5.74609 8.13132 5.82072 7.99848 5.95356C7.86564 6.0864 7.79102 6.26657 7.79102 6.45443V8.57943C7.79102 8.76729 7.86564 8.94746 7.99848 9.08029C8.13132 9.21313 8.31149 9.28776 8.49935 9.28776H9.91602C10.1039 9.28776 10.284 9.21313 10.4169 9.08029C10.5497 8.94746 10.6243 8.76729 10.6243 8.57943C10.6243 8.39157 10.5497 8.2114 10.4169 8.07856C10.284 7.94572 10.1039 7.87109 9.91602 7.87109H9.20768V6.45443C9.20768 6.26657 9.13305 6.0864 9.00022 5.95356C8.86738 5.82072 8.68721 5.74609 8.49935 5.74609Z"
                    fill="url(#paint0_linear_1244_1259)"
                  />
                  <defs>
                    <linearGradient
                      id="paint0_linear_1244_1259"
                      x1="1.41602"
                      y1="8.57914"
                      x2="15.5828"
                      y2="8.57914"
                      gradientUnits="userSpaceOnUse"
                    >
                      <stop stopColor="#AE8556" />
                      <stop offset="1" stopColor="#90794C" />
                    </linearGradient>
                  </defs>
                </svg>
                <h6 className=" text-sm font-gothamLight text-neutral-800">
                  {date}
                </h6>
              </div>
            )}

            {location && (
              <div className="flex items-center gap-2">
                <LocationIcon />

                <h6 className="text-sm font-gothamLight text-neutral-800">
                  {location}
                </h6>
              </div>
            )}
          </div>

          {description && (
            <p className="mt-2 text-xs md:text-sm text-neutral-900 font-gothamLight">
              {description}
            </p>
          )}
        </div>
      </div>
    </div>
  );
}
